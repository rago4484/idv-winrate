<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <!-- ã‚¹ãƒãƒ›ç”¨ -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç¬¬äº”äººæ ¼ å‹ç‡ãƒã‚§ãƒƒã‚«ãƒ¼</title>
  <style>
    :root {
      --bg-main: #f3f4f8;
      --card-bg: #ffffff;
      --accent: #4c7dff;
      --accent-soft: #e4ecff;
      --accent-warm: #ff915e;
      --border-soft: #e0e3ee;
      --text-main: #222;
      --text-sub: #777;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 12px;
      line-height: 1.6;
      background: radial-gradient(circle at 0 0, #fdfbff, #f3f4f8 40%, #e8ebf5);
      color: var(--text-main);
    }

    @media (min-width: 768px) {
      body {
        padding: 20px;
        display: flex;
        justify-content: center;
      }
      .app-container {
        width: 640px;
      }
    }

    .app-container {
      max-width: 480px;
      margin: 0 auto;
    }

    h1 {
      margin: 0 0 0.2em;
      font-size: 1.4rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    h1 span.logo-dot {
      width: 20px;
      height: 20px;
      border-radius: 6px;
      background: linear-gradient(135deg, #4c7dff, #9e7bff);
      display: inline-block;
    }

    h2 {
      margin: 0 0 0.4em;
      font-size: 1.05rem;
    }

    .page-header {
      margin-bottom: 10px;
    }

    .small {
      font-size: 12px;
      color: var(--text-sub);
    }

    .section {
      background: var(--card-bg);
      border-radius: 14px;
      padding: 12px;
      margin-bottom: 12px;
      border: 1px solid var(--border-soft);
      box-shadow:
        0 10px 25px rgba(15, 23, 42, 0.05),
        0 1px 0 rgba(255, 255, 255, 0.9);
    }

    @media (min-width: 768px) {
      .section {
        padding: 16px 18px;
        margin-bottom: 16px;
      }
    }

    .section-header-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 4px;
    }

    .badge {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: #e5f3ff;
      color: #2563eb;
      border: 1px solid #bfdbfe;
      white-space: nowrap;
    }

    button {
      cursor: pointer;
      border: none;
      background: none;
      touch-action: manipulation;
    }

    .btn-main {
      margin-top: 8px;
      padding: 10px 16px;
      border-radius: 999px;
      border: 1px solid #c7cce5;
      background: linear-gradient(135deg, #ffffff, #f1f3ff);
      font-size: 14px;
      font-weight: 600;
      color: #334155;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      box-shadow: 0 2px 8px rgba(15, 23, 42, 0.06);
      min-width: 80px;
    }

    .btn-main.primary {
      background: linear-gradient(135deg, var(--accent), #7c9dff);
      color: #fff;
      border-color: transparent;
    }

    .btn-main.danger {
      background: linear-gradient(135deg, #f97373, #fb923c);
      color: #fff;
      border-color: transparent;
    }

    .btn-main:hover {
      filter: brightness(0.98);
    }

    .btn-main:active {
      transform: translateY(1px);
      box-shadow: 0 1px 4px rgba(15, 23, 42, 0.1);
    }

    .btn-group-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }

    .stats-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }

    .stat-box {
      flex: 1 1 120px;
      padding: 8px 10px;
      border-radius: 10px;
      background: #f7f7fb;
    }

    .stat-label {
      font-size: 11px;
      color: #6b7280;
    }

    .stat-value {
      font-size: 20px;
      font-weight: 700;
    }

    .stat-sub {
      font-size: 11px;
      color: #9ca3af;
    }

    .field-label {
      font-weight: 600;
      margin-top: 6px;
      margin-bottom: 4px;
      display: block;
      font-size: 13px;
    }

    .field-label .tag {
      display: inline-block;
      margin-left: 6px;
      padding: 2px 6px;
      border-radius: 999px;
      background: var(--accent-soft);
      color: #4b5a88;
      font-size: 11px;
      font-weight: 500;
    }

    .input-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
      flex-wrap: wrap;
    }

    .input-row label {
      font-size: 12px;
      min-width: 40px;
    }

    .num-input {
      width: 90px;
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid #d4d7e5;
      font-size: 14px;
      text-align: right;
    }

    .muted {
      color: var(--text-sub);
      font-size: 11px;
      margin-top: 4px;
    }

    @media (min-width: 768px) {
      h1 {
        font-size: 1.6rem;
      }
      .section {
        margin-bottom: 18px;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <header class="page-header">
      <h1>
        <span class="logo-dot"></span>
        ç¬¬äº”äººæ ¼ å‹ç‡ãƒã‚§ãƒƒã‚«ãƒ¼
      </h1>
      <p class="small">
        ãƒ»ãƒ–ãƒ©ã‚¦ã‚¶ã® localStorage ã«ä¿å­˜ã•ã‚Œã‚‹ã®ã§ã€åŒã˜ç«¯æœ«ãƒ»åŒã˜ãƒ–ãƒ©ã‚¦ã‚¶ãªã‚‰é–‰ã˜ã¦ã‚‚æ®‹ã‚Šã¾ã™ã€‚<br>
        ãƒ»å‹ç‡ã¯ã€Œå‹ã¡ Ã·ï¼ˆå‹ã¡ï¼‹è² ã‘ï¼‰ã€ã§è¨ˆç®—ï¼ˆåˆ†ã‘ã¯å«ã‚ãªã„ï¼‰ã€‚<br>
        ãƒ»åˆ†ã‘ç‡ã¯ã€Œåˆ†ã‘ Ã· å…¨è©¦åˆæ•°ã€ã‚’åˆ¥ã§è¡¨ç¤ºã—ã¾ã™ã€‚
      </p>
    </header>

    <!-- 1. ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã§è¨˜éŒ² -->
    <section class="section">
      <div class="section-header-row">
        <h2>1. ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã§è¨˜éŒ²</h2>
        <span class="badge">è©¦åˆå¾Œã«ãƒãƒãƒãƒ</span>
      </div>
      <p class="small">
        è©¦åˆãŒçµ‚ã‚ã£ãŸã‚‰ã€Œå‹ã¡ï¼åˆ†ã‘ï¼è² ã‘ã€ã‚’ã‚¿ãƒƒãƒ—ã—ã¦è¨˜éŒ²ã—ã¾ã™ã€‚
      </p>

      <div class="stats-row">
        <div class="stat-box">
          <div class="stat-label">ç·è©¦åˆæ•°</div>
          <div class="stat-value" id="total-matches">0</div>
          <div class="stat-sub">å‹ã¡ï¼‹åˆ†ã‘ï¼‹è² ã‘</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">å‹ã¡</div>
          <div class="stat-value" id="wins">0</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">åˆ†ã‘</div>
          <div class="stat-value" id="draws">0</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">è² ã‘</div>
          <div class="stat-value" id="losses">0</div>
        </div>
      </div>

      <div class="btn-group-row">
        <button class="btn-main primary" type="button" onclick="addResult('win')">
          âœ… å‹ã¡ ï¼‹1
        </button>
        <button class="btn-main" type="button" onclick="addResult('draw')">
          â–² åˆ†ã‘ ï¼‹1
        </button>
        <button class="btn-main" type="button" onclick="addResult('lose')">
          âŒ è² ã‘ ï¼‹1
        </button>
      </div>
    </section>

    <!-- 2. å‹ç‡ãƒ»åˆ†ã‘ç‡ -->
    <section class="section">
      <div class="section-header-row">
        <h2>2. å‹ç‡ãƒ»åˆ†ã‘ç‡</h2>
        <span class="badge">è‡ªå‹•è¨ˆç®—</span>
      </div>
      <div class="stats-row">
        <div class="stat-box">
          <div class="stat-label">å‹ç‡ï¼ˆåˆ†ã‘é™¤ãï¼‰</div>
          <div class="stat-value" id="win-rate">0.0%</div>
          <div class="stat-sub" id="win-rate-sub">å‹ã¡ 0 / (å‹ã¡ 0 ï¼‹ è² ã‘ 0)</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">åˆ†ã‘ç‡ï¼ˆå…¨ä½“ã«å¯¾ã—ã¦ï¼‰</div>
          <div class="stat-value" id="draw-rate">0.0%</div>
          <div class="stat-sub" id="draw-rate-sub">åˆ†ã‘ 0 / ç·è©¦åˆ 0</div>
        </div>
      </div>
      <p class="small" style="margin-top:8px;">
        â€»å‹ç‡ã¯ã€Œå¼•ãåˆ†ã‘ã‚’é™¤ã„ãŸã¨ãã®å‹ã¡å‰²åˆã€ã§ã™ã€‚<br>
        ä¾‹ï¼šå‹ã¡ 6ãƒ»åˆ†ã‘ 2ãƒ»è² ã‘ 2 â†’ å‹ç‡ = 6 / (6+2) = 75%ã€åˆ†ã‘ç‡ = 2 / 10 = 20%
      </p>
    </section>

    <!-- 3. æ‰‹å…¥åŠ›ãƒ»ãƒªã‚»ãƒƒãƒˆ -->
    <section class="section">
      <div class="section-header-row">
        <h2>3. æ‰‹å…¥åŠ›ãƒ»ãƒªã‚»ãƒƒãƒˆ</h2>
        <span class="badge">ã¾ã¨ã‚ã¦èª¿æ•´</span>
      </div>
      <p class="small">
        ã™ã§ã«ãƒ¡ãƒ¢ãŒã‚ã‚‹å ´åˆãªã©ã¯ã€ã“ã“ã‹ã‚‰ç›´æ¥æ•°å­—ã‚’å…¥ã‚Œã¦ä¸Šæ›¸ãã§ãã¾ã™ã€‚
      </p>

      <div class="input-row">
        <label for="input-wins">å‹ã¡</label>
        <input id="input-wins" type="number" min="0" class="num-input" inputmode="numeric">
      </div>
      <div class="input-row">
        <label for="input-draws">åˆ†ã‘</label>
        <input id="input-draws" type="number" min="0" class="num-input" inputmode="numeric">
      </div>
      <div class="input-row">
        <label for="input-losses">è² ã‘</label>
        <input id="input-losses" type="number" min="0" class="num-input" inputmode="numeric">
      </div>

      <div class="btn-group-row">
        <button class="btn-main primary" type="button" onclick="applyManualInput()">
          âœï¸ ã“ã®å€¤ã§ä¸Šæ›¸ã
        </button>
        <button class="btn-main danger" type="button" onclick="resetAll()">
          ğŸ§¹ å…¨ã¦ãƒªã‚»ãƒƒãƒˆ
        </button>
      </div>

      <p class="muted">
        â€»ãƒªã‚»ãƒƒãƒˆã™ã‚‹ã¨å‹ã¡ãƒ»åˆ†ã‘ãƒ»è² ã‘ã®ã‚«ã‚¦ãƒ³ãƒˆãŒã™ã¹ã¦ 0 ã«æˆ»ã‚Šã€localStorage ã®ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã‚‚å‰Šé™¤ã•ã‚Œã¾ã™ã€‚
      </p>
    </section>
  </div>

  <script>
    const STORAGE_KEY = "idv_winrate_v1";

    let wins = 0;
    let draws = 0;
    let losses = 0;

    function save() {
      try {
        localStorage.setItem(
          STORAGE_KEY,
          JSON.stringify({ wins, draws, losses })
        );
      } catch (e) {
        console.warn("ä¿å­˜å¤±æ•—", e);
      }
    }

    function load() {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) return;
      try {
        const data = JSON.parse(raw);
        if (typeof data.wins === "number") wins = data.wins;
        if (typeof data.draws === "number") draws = data.draws;
        if (typeof data.losses === "number") losses = data.losses;
      } catch (e) {
        console.warn("èª­ã¿è¾¼ã¿å¤±æ•—", e);
      }
    }

    function addResult(type) {
      if (type === "win") wins++;
      if (type === "draw") draws++;
      if (type === "lose") losses++;
      save();
      render();
    }

    function resetAll() {
      if (!confirm("å‹ã¡ãƒ»åˆ†ã‘ãƒ»è² ã‘ã®ã‚«ã‚¦ãƒ³ãƒˆã‚’å…¨ã¦ 0 ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ")) return;
      wins = 0;
      draws = 0;
      losses = 0;
      localStorage.removeItem(STORAGE_KEY);
      render();
      // å…¥åŠ›æ¬„ã‚‚ã‚¯ãƒªã‚¢
      document.getElementById("input-wins").value = "";
      document.getElementById("input-draws").value = "";
      document.getElementById("input-losses").value = "";
    }

    function applyManualInput() {
      const w = parseInt(document.getElementById("input-wins").value, 10);
      const d = parseInt(document.getElementById("input-draws").value, 10);
      const l = parseInt(document.getElementById("input-losses").value, 10);

      const safeW = isNaN(w) || w < 0 ? 0 : w;
      const safeD = isNaN(d) || d < 0 ? 0 : d;
      const safeL = isNaN(l) || l < 0 ? 0 : l;

      wins = safeW;
      draws = safeD;
      losses = safeL;

      save();
      render();
    }

    function render() {
      const totalMatches = wins + draws + losses;
      const winBase = wins + losses; // å‹ç‡ã®åˆ†æ¯ï¼ˆåˆ†ã‘é™¤å¤–ï¼‰

      document.getElementById("wins").textContent = wins;
      document.getElementById("draws").textContent = draws;
      document.getElementById("losses").textContent = losses;
      document.getElementById("total-matches").textContent = totalMatches;

      let winRate = 0;
      let drawRate = 0;

      if (winBase > 0) {
        winRate = (wins / winBase) * 100;
      }
      if (totalMatches > 0) {
        drawRate = (draws / totalMatches) * 100;
      }

      document.getElementById("win-rate").textContent = winRate.toFixed(1) + "%";
      document.getElementById("draw-rate").textContent = drawRate.toFixed(1) + "%";

      document.getElementById("win-rate-sub").textContent =
        `å‹ã¡ ${wins} / (å‹ã¡ ${wins} ï¼‹ è² ã‘ ${losses})`;

      document.getElementById("draw-rate-sub").textContent =
        `åˆ†ã‘ ${draws} / ç·è©¦åˆ ${totalMatches}`;
    }

    function init() {
      load();
      // æ‰‹å…¥åŠ›æ¬„ã«ç¾åœ¨å€¤ã‚’åæ˜ ã—ã¦ãŠãï¼ˆä»»æ„ï¼‰
      document.getElementById("input-wins").value = wins || "";
      document.getElementById("input-draws").value = draws || "";
      document.getElementById("input-losses").value = losses || "";
      render();
    }

    init();
  </script>
</body>
</html>
